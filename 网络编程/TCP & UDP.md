# TCP & UDP

## 前言:

    最近面试发现自己好多基础都很薄弱,复习顺便记录下,带着问题去学习效率高点,所以每篇会先提个问题,并去解决

## 提出问题:

    TCP 是什么?
    TCP 的 三次握手 & 四次挥手流程?
    UDP 是什么?
    TCP 与 UDP各有什么优缺点?    

## TCP:(传输控制协议)

    面向连接,可靠的,有序的传输协议

### 三次握手

    1. 客户端向服务端发送连接消息
    2. 服务端向客户端发送确认消息
    3. 客户端向服务端发送确认消息

#### TIP:

    TCP建立连接为什么需要三次握手
    防止服务端因为接受了早已失效的连接请求报文,从而一直等待客户端请求,最终导致死锁,浪费资源.

### 四次握手

    1. 客户端向服务端发送断开消息
    2. 服务端向客户端发送确认断开消息
    3. 服务端向客户端发送断开消息
    4. 客户端向服务端发送接收断开的消息并最终确认断开连接

#### TIP:

    TCP建立连接为什么需要四次挥手
    因为TCP连接是可以双方互相发送接收消息的,可能Client发送关闭消息的时候,服务端还有消息要给客户端发送,所以需要四次挥手

## UDP

    面向数据报文,不可靠的,无序的传输协议

## TCP & UDP 区别

### 建立连接方式的区别

    TCP 
        创建连接需要三次握手,断开连接需要四次挥手
    UDP 
        只需要知道对方的IP地址,将数据报一份一份的发送过去就可以了,其他的作为发送方都不需要关心

### 数据发送方式的区别

    TCP 
        由于TCP是建立在两端连接之上的协议,所以理论上发送的数据流不存在大小的限制
        但由于缓冲区有大小限制,所以用TCP发送一段很大的数据,可能会被截断成好几段,接收方依次接收
    UDP
        UDP本身发送的就是一份一份的数据报,所以是有大小限制的

### 数据有序性的区别

    TCP
        TCP本身就有超时重传,错误重传,还有一系列复杂算法保证了TCP的数据是有序的
        假设你发送了数据1,2,3 则只要发送端和接收端保持连接时,接收端收到的数据始终都是1,2,3
    UDP
        无论Server缓冲池大小有多大,接手Client端发来的消息总是一个一个的接收,UDP本身就有不可靠性和无序性
        假设你发送了数据1,2,3 Server端收到的数据可能是任意顺序,任意个数的排列组合

##  TCP & UDP 区别(总结)

|区别|TCP|UDP|
|---|---|---|
|是否面向连接|面向连接|无连接(数据包)|
|传输可靠性|可靠|不可靠|
|有序性|有序|无序|
|传输形式|字节流|数据报文段|
|传输效率|慢|快|
|所需资源|多|少|
|是否点对点|点对点|可以点对多|

## 使用场景

    UDP
        对实时性要求高,实时会议,实时视频聊天,如果使用TCP,放网络不好的情况下会有延时,而使用UDP的话,及时偶尔丢包,也不会影响什么
        